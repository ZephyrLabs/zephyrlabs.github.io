<!DOCTYPE html>
    <link id="theme" rel="stylesheet" 
    type="text/css" href="../../themes/article_dark.css" />
    <link id="theme" rel="stylesheet" 
    type="text/css" href="../../themes/article.css" />

    <script>
        function theme_toggle() {
            var theme = document.getElementsByTagName('link')[0];
            if (document.getElementById("theme_button").innerText == "Dark") {
                document.getElementById("theme_button").innerText = "Light";

                if (theme.getAttribute('href') == "../../themes/article_dark.css") {
                    theme.setAttribute('href', "../../themes/article_light.css");
                }
                
            }
            else {
                document.getElementById("theme_button").innerText = "Dark";
                theme.setAttribute('href', "../../themes/article_dark.css");
            }
        }
    </script>

    <body>        
        <div class="topnav">
            <a href="../../index.html">Home</a>
            <a href="../about/index.html">About</a>
        </div>
        <div>
            <button id="theme_button" onclick="theme_toggle()">Dark</button>
        </div>
        <div>
            <h2 id="toc_1">The curse of the SoCs,</h2>

            <h3 id="toc_1.1">the indepth analysis on various ARM SoC&#39;s and their performance dependant on cache..</h3>

            <p>as contd. from my last article, 
            I wanted to explore more about why the A311D and the RK3399 underperformed in my prime_bench tests,<br> even thought they were on-paper
            a greater spec than the better performing Snapdragon 820..</p>

            <h4 id="toc_1.1.1">There is more Than meets the eye</h4>

            <p>as discussed previously, 
            the prime_bench stresses to show three main things:</p>

            <li>the clock speeds,</li>
            <li>the efficiency of the architecture,</li>
            <li>CPU/memory integrity</li>
            
            <p>to explain this anomaly,
            we need to look at the balance of these three parameters,</p>

            <p>but before that, we must discuss the spec-wise difference of each SoC:</p>

            <p><strong>Amlogic A311D:</strong>
            A processer using the big.LITTLE configuration of cores, with 4x A73 big cores, and 2x A53 small cores, 6 cores total..</p>

            <p>the system is specifically of the Aarch64 (ARM 64bit &amp; ARMv8) architecture,</p>

            <p><strong>Rockchip RK3399:</strong>
            A processer using the big.LITTLE configuration of cores, with 2x A72 big cores, and 4x A53 small cores, 6 cores total..</p>

            <p>the system is specifically of the Aarch64 (ARM 64bit &amp; ARMv8) architecture,</p>

            <p><strong>Snapdragon 820:</strong>
            A processer using the big.LITTLE configuration of cores, with 2x A57 big cores, and 2x A57 small cores, 4 cores total..</p>

            <p>the system is specifically of the Aarch64 (ARM 64bit &amp; ARMv8) architecture,</p>

            <h4>clockspeed:</h4>

            <p>The A311D has the highest of the clockspeeds, 
            clocking in at 2.2/ 1.8GHz with the ability to overclock to 2.4/ 2.2Ghz.. </p>

            <p>The Snapdragon 820, at 2.2Ghz/ 1.6GHz</p>

            <p>The RK3399, at last with 1.8/ 1.4GHz</p>

            <p>from this, it seems slightly absurd, 
            <strong><q>how can the fasted clocked processer, come in at 2nd, the second fastest clocked at 1st</q></strong>
            so it obviously be something from the other two parameters..,</p>

            <h4>architecture:</h4>

            <p>All the SoCs use the same ARMv8-A architcture, but there is a bit more to it...
            this chart below, shows the differences between the main big cores of the SoC, and the variations of the things like the pipeline depth, and out-of-order execution dispatch width, etc.</p>

            <p><img src="comparison.png" alt="comparison"></p>

            <p>as seen from this chart, the instructions per second is in descending order, the A73, the A72, and the A57..
            <strong><q>so, how can the A57 cores from the snapdragon, get more done, with less!?</q></strong></p>

            <h4>CPU/memory integrity</h4>

            <p>this leads to the final conclusion that, the RK3399 and A311D must be highly cache deficient, 
            and this is on some part directly the reason for the deficiency in performance..</p>

            <p>the A73 cores in the A311D, must need to spend more instruction on trying to fit all the data within the given limit, rather than working on the computational task.</p>

            <h4 id="toc_1.1.2">so what can we do to speed things up ?</h4>

            <p>unfortunately we can&#39;t just increase the cache, as it is an onchip, hardware limitation.
            the only option is to disable a few of the cores to reduce the shared cache usage, 
            this <q>in theory</q> should allow for the A73 cores to work, better, faster and optimise the task a bit better..</p>

            <p><img src="optimization.png" alt="comparison"></p>

            <p>but which cores should we disable ??</p>

            <p><img src="power.bmp" alt="power"></p>

            <p>from this power sequence from the A311D&#39;s, we see the A53 cores are detrimental to the bootup process, and shouldn&#39;t be tampered with 
            for this reason, I chose to disable the cores CPU_4 and CPU_5 which are the last two A73 cores..</p>

            <p>I will do some testing here, and will post the results..</p>

            <h3 id="toc_1.2">After testing:</h3>

            <p>to my dismay, disabling cores did NOT affect the single core performance,
            which seems sad, but it doesn&#39;t mean its totally unusable..</p>

            <p>as said before, prime bench is only a test for compute, and is for testing processers under extreme conditions,
            such an intense situation won&#39;t happen when using a normal apps meant for other things..</p>

            <p>in real life tests, the A311D is actually the better of the three processers tested, in general performance and overall capability..</p>

            <p>the RK3399, and the Snapdragon 820 come in at a tight 2nd place interms of general performance...</p>

            <p>I hope to make more improvements in the software, and make more real life equivalent tests, in the coming near future :)</p>
        </div>
    </body>
</html>